<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Siddhivinayak Platinum</title>

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700,900" rel="stylesheet">

    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/owl.theme.default.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="responsive.css">
    <link rel="shortcut icon" href="img/logo1.jpg" type="image/x-icon">
</head>

<body onload="getDetails()">
    <div class="wrapper">
        <header class="header">
            <section class="header-top">
                <div class="container">
                    <div class="row">
                        <div class="col-md-8 col-sm-8 col-xs-12">
                            <div class="contact">
                                <p><span class="phone"><a href="#"></a></span><span class="email"><a href="#">Email: siddhivinayakplatinum@gmail.com</a></span></p>
                            </div>
                        </div>
                       
                    </div>
                </div>
            </section>
            <section class="header-bottom borderstyle">
                <div class="container">
                    <div class="row">
                        <div class="col-md-5 col-sm-12 col-xs-12">
                            <a href="#">
                                <div class="main-logo">
                                    <!--<img src="img/logo.png" alt="">-->
                                    <h2>Siddhivinayak Platinum</h2>
                                </div>
                            </a>
                        </div>
                        <div class="col-md-7 col-sm-12 col-xs-12">
                            <div class="menu">
                                <ul class="nav navbar-nav">
                                    
                                    <li class="activeHeader"><a href="BalanceAmount.html">Balance Amount</a></li>
                                    
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </header>
        
	
       <div class="container">
            <form id="contact" action="" method="post">
                <h3 style="color:darkgreen"> Balance Amount  </h3>
                <h3 style="color:rgb(236, 16, 90)"> Total Flat Balance - 12346881 Rs	</h4>
                <h3 style="color:rgb(236, 16, 90)"> Total Maintenance Balance -	3038254	Rs  </h4>
                <h3 style="color:rgb(236, 16, 90)"> Total Balance -	15385135 Rs </h3>
				<h3 style="color:darkgreen"> Owner Ready to Pay Amount -	<span id="ownerReadyid">0</span> Rs  </h3>
               
                <fieldset>
                    <label for="Search">Search</label>
				   <input id="Search" placeholder="Type to filter records" maxlength=10 class="form-control" type="text" cols="50"  style="margin-bottom: 10px" required autofocus>
					
                </fieldset>
            </form>
        
      
<!-- <select id="monthSelection" onChange="return displayTableData()"></select> -->
<!-- <table id="displayTableDetails" class="table table-striped table-bordered table-hover"
	<table id="displayTableDetails"> -->
	<table id="displayTableDetails" class="table table-striped table-bordered table-hover">
	<thead>
        <th><a href="javascript:void(0)" style="cursor: pointer;">Sr. No</a></th>
        <th><a href="javascript:void(0)" style="cursor: pointer;">Flat Number</a></th>
		<th><a href="javascript:void(0)" style="cursor: pointer;">Owner Name</a></th>
		<th><a href="javascript:void(0)" style="cursor: pointer;">Contact Number</a></th>
		<th><a href="javascript:void(0)" style="cursor: pointer;">Flat Balance</a></th>
		<th><a href="javascript:void(0)" style="cursor: pointer;">Maintenance Balance</a></th>
		<th><a href="javascript:void(0)" style="cursor: pointer;">Total Pending</a></th>
		<th>Owner Ready to Pay Amount</th>
	</thead>
	<tbody></tbody>
	</table>
</div>
        <div class="clear"></div>

        <footer class="footer">
            <div class="container">
                <div class="row">
                    <div class="col-md-5 col-sm-8">
                        <div class="footer-text one">
                            <h3>CONTACT US</h3>
                            <ul>
                                <li><a href="#"><i class="material-icons">location_on</i>Sector 23, Plot Number 142, ULWE, Navi Mumbai</a></li>
                                <li><a href="#"><i class="material-icons">email</i>jalaj.purohit@gmail.com</a></li>
                                <li><a href="#"><i class="material-icons">call</i>9820684534</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="footer_bottom">
                <p>Copyright@2020 <a href="#">Jalaj Rajpurohit</a> All Rights Reserved</p>
            </div>
        </footer>
    </div>
    <script src="js/jquery-3.1.1.min.js"></script>
    <script src="js/animationCounter.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/active.js"></script>
   
   
    <script>
var context="https://5vvnjl5hii.execute-api.ap-south-1.amazonaws.com/dev/SP/";
function getDetails(){
         var list = [];
          list.push("A-101,Pritam Naik,7710933367,0,22090,22090,0");
 list.push("A-102,Pritam Naik,7710933367,0,22090,22090,0");
 list.push("A-103,Arun Kamble,8108777567,0,7477,7477,0");
 list.push("B-104,0,0,?,?,0,0");
 list.push("B-105,Sanjay Murudkar,9870238924,1,15461,15462,0");
 list.push("B-106,Dilip Naik,7710933367,0,64310,64310,0");
 list.push("C-107,Dilip Naik,7710933367,0,64310,64310,0");
 list.push("C-108,Ajit Gokhale,9820519523,0,50778,50778,0");
 list.push("C-109,Mihir Kamdar,0,10,43227,43237,0");
 list.push("D-110,Akshay Apte,9769670356,0,8316,8316,0");
 list.push("D-111,Prajwal Jamkhandikar,7738011367,207200,127281,334481,0");
 list.push("D-112,0,0,?,?,0,0");
 list.push("A-201,Dilip Naik,7710933367,0,62245,62245,0");
 list.push("A-202,Dilip Naik,7710933367,0,62245,62245,0");
 list.push("A-203,Sakharam Vasant Bhosle,9894438075,94035,19116,113151,0");
 list.push("B-204,Sanjay Ghadge,9967537979,112000,74466,186466,0");
 list.push("B-205,Sandeep Varhadi,0,102720,22408,125128,0");
 list.push("B-206,Dilip Naik,7710933367,0,146898,146898,0");
 list.push("C-207,Reena  Chaturvediv,9323812571,241920,103727,345647,0");
 list.push("C-208,Jagjeet Singh Aurora,6867018636,0,29877,29877,0");
 list.push("C-209,Sagar J. Pawar,9653494873,0,36578,36578,0");
 list.push("D-210,Vijaya Iyer,9892171019,112000,54162,166162,0");
 list.push("D-211,Sarvesh Pal,7666628348,79508,104571,184079,0");
 list.push("D-212,Neeraj Tiwari,9004973152,566608,46757,613365,0");
 list.push("A-301,Madhavi Desai,9970197915,0,0,0,0");
 list.push("A-302,Narayan Chavan,9870948837,56000,23294,79294,0");
 list.push("A-303,Mohan Koli,8689805285,0,70713,70713,0");
 list.push("B-304,Seema Ashok Sharma,9833898900,520369,0,520369,0");
 list.push("B-305,Santram Khavase,9833990621,0,5476,5476,0");
 list.push("B-306,Milind Bhoskar,9870961598,176960,0,176960,0");
 list.push("C-307,Shreyas Goyal,9789079426,0,95580,95580,0");
 list.push("C-308,Sagar Bhogte,9869466295,185920,29594,215514,0");
 list.push("C-309,Kedar Shetye,9820124375,2555280,19116,2574396,0");
 list.push("D-310,Nitin Iyer,9892171019,112000,54162,166162,0");
 list.push("D-311,Agney Purohit,9099938449,0,28633,28633,0");
 list.push("D-312,Shailesh Borkar,9323433691,436240,43846,480086,0");
 list.push("A-401,Ramesh Sonawane,9819190682,277200,25678,302878,0");
 list.push("A-402,Pranay Panad,9820506305,63280,122000,185280,0");
 list.push("A-403,Sharad Kale,9920506305,0,7344,7344,0");
 list.push("B-404,Surendra Patil,8652393208,0,18134,18134,0");
 list.push("B-405,Chitte Vasant Barku,9969009720,0,30341,30341,0");
 list.push("B-406,Seerla Chandrasekhar,8008322003,370431,0,370431,0");
 list.push("C-407,Pritam Naik,7710933367,0,42327,42327,0");
 list.push("C-408,Sanjay Borse,9821380732,0,51790,51790,0");
 list.push("C-409,Ramesh Kadam,9833127147,1891680,0,1891680,0");
 list.push("D-410,Siddharth Goel,0,0,30267,30267,0");
 list.push("D-411,Himmatrao Savale,9870603622,425600,119487,545087,0");
 list.push("D-412,Akshay Rajpurohit,7738038079,1158,29877,31035,0");
 list.push("A-501,Dilip Naik,7710933367,0,86317,86317,0");
 list.push("A-502,Mr. Rao,8008322003,389158,0,389158,0");
 list.push("A-503,Anil Ganwani,9769909403,96223,0,96223,0");
 list.push("B-504,Anil Ganwani,9769909403,135535,0,135535,0");
 list.push("B-505,Vivek Yadav,0,0,51790,51790,0");
 list.push("B-506,Leo Williams,9819648330,0,103580,103580,0");
 list.push("C-507,Purnendu Ghosh,0,224840,37648,262488,0");
 list.push("C-508,Arun Saxena,9969417275,0,24453,24453,0");
 list.push("C-509,Bajaji Jadhav,9930364580,362,33453,33815,0");
 list.push("D-510,Prakash Ghart,9819078152,0,6516,6516,0");
 list.push("D-511,Sanjay Singh,0,0,0,0,0");
 list.push("D-512,Gautam Pagare,8655219557,0,29594,29594,0");
 list.push("A-601,Dilip Naik,7710933367,0,62245,62245,0");
 list.push("A-602,Srikanth Mikkilineni,8008322003,15367,0,15367,0");
 list.push("A-603,Binod Sahu,9987173228,0,8316,8316,0");
 list.push("B-604,Sudhir Vanarase,9820892313,130564,9558,140122,0");
 list.push("B-605,Shiv Nair,9819148551,0,14938,14938,0");
 list.push("B-606,0,0,?,?,0,0");
 list.push("C-607,Pankaj Kumar,0,165200,0,165200,0");
 list.push("C-608,Mr. Misra,8356050025,0,4557,4557,0");
 list.push("C-609,Mr. Misra,8356050025,0,2916,2916,0");
 list.push("D-610,Gopal Rajpal,9819314424,8024,14701,22725,0");
 list.push("D-611,Nageshwar Rao,9869515186,0,179265,179265,0");
 list.push("D-612,Asit Baran Karmakar,0,0,29877,29877,0");
 list.push("A-701,Vasant Deshmukh,9870986015,0,0,0,0");
 list.push("A-702,Rajkumar Singh,9819071665,0,29594,29594,0");
 list.push("A-703,Kamal Patwa,9769481238,0,48616,48616,0");
 list.push("B-704,Loren Bonita Lobo,9820535094,0,79380,79380,0");
 list.push("B-705,Ashwani Joshi,9869466658,461776,0,461776,0");
 list.push("B-706,Tanaji More,9833368344,213920,0,213920,0");
 list.push("C-707,Subbaraman Iyer,8097465602,554892,21457,576349,0");
 list.push("C-708,Pradeep Sonavane,9221471306,33124,51790,84914,0");
 list.push("C-709,Akshay Sonavane,9221471306,0,33453,33453,0");
 list.push("D-710,Deepak Veer,9930651106,0,9558,9558,0");
 list.push("D-711,Aman Grover,971-559945450,1329776,0,1329776,0");
 list.push("D-712,Jalaj Purohit,9820684534,0,28633,28633,0");

			 
	 generateTable(list);
	 getAllOwnerReadyData();
	 
	}
	
	

function generateTable(list){
        $("#displayTableDetails > tbody").empty();       
        $(list).each(function(i){
		var ownerReady = "<input type='text' size='3' name='ownerReady' value='0' onkeyup='return checkValidAmt1(this)' />&nbsp;&nbsp;<input type='button' onClick='return updateOwnerReadyData(this)'; value='Update' class='btn btn-primary' />"
            var val = this.split(",");
            var tr="<tr><td data-type='number'>"+(++i)+" </td><td>"+val[0]+"</td><td>"+val[1]+"</td><td data-type='number'>"+val[2]+"</td><td data-type='number'>"+val[3]+"</td>"+
			"<td data-type='number'>"+val[4]+"</td><td data-type='number'>"+val[5]+"</td><td>"+ownerReady+"</td></tr>";
            $("#displayTableDetails").append(tr);
        });
    }
	
	function checkValidAmt1(obj){
		if(!checkValidAmt($(obj).val())){
			$(obj).val('');
		}
	}
function checkValidAmt(val){
 var patt1 = /[^0-9]/g;
  var result = val.match(patt1);
	if(result != null){
    alert("Please only enter numeric characters only for Amount");
	return false;
  }
  return true;
}
	
function getAllOwnerReadyData(){
$.ajax({
			  type: 'POST',
			  url: context + "fetchSPDetails",
			  success: function (response) { 				
					$(response).each(function(){
							findRowUpdateAmt($(this).attr('id'),$(this).attr('amt'))
					})
				},
			  error : function (response) { 						
					
					alert(response);
					}

			});


}	
function findRowUpdateAmt(flat,amt){
	$("#displayTableDetails > tbody > tr").each(function(){
			if(flat == $(this).find('td').eq(1).html()){
				$(this).find('td').eq(7).find('input[name="ownerReady"]').val(amt);
				$("#ownerReadyid").html(parseInt($("#ownerReadyid").html()) + parseInt(amt));
			}
			
	});
}

function updateOwnerReadyData(obj){
	var flatNo=$(obj).parent().parent().find('td').eq(1).html();
	var amt=$(obj).parent().find('input[name="ownerReady"]').val();	
	 if(amt == ""){
	alert('Please enter amount for Flat No '+flatNo);
	return false;
	}
	if(! checkValidAmt(amt)){
		return false;
	}
	var map = {};
	map["flatNo"]=flatNo
	map["amt"]=amt
	$.ajax({
			  type: 'POST',
			  url: context + "saveSPDetails",
			  data:JSON.stringify(map),
			  success: function (response) { 				
					alert(amt+' Rs, Amount has been Updated Successfully for Flat No : ' +flatNo )
				},
			  error : function (response) {
					alert("Some Error occur "+response);
					}

			});
}
    $(document).ready(function(){
      $("#Search").on("keyup", function() {
        var value = $(this).val().toLowerCase();
        $("#displayTableDetails tbody tr").filter(function() {
          $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
        });
      });
	  $("#displayTableDetails").find('a').click(function() { 
		sortTableDetails(this);
		return false;
	});
    });
	
var prevIndex = -1; 
var sortState = 'N'; 

function sortTableDetails(obj){
var position = $(obj).parent().index();
var table, rows, switching, i, x, y, shouldSwitch;
var tableName =  table = $(obj).parent().parent().parent().parent().attr("id");
 table = document.getElementById(tableName);
 switching = true;
 while (switching) {
   switching = false;
   rows = table.getElementsByTagName("TR");   
   for (i = 1; i < (rows.length - 1); i++) {     
     shouldSwitch = false;      
     x = rows[i].getElementsByTagName("TD")[position];
     y = rows[i + 1].getElementsByTagName("TD")[position]; 
     var sortdataType = 'string';
     if(rows[i].getElementsByTagName("TD")[position].getAttribute("data-type") == 'number' && rows[i + 1].getElementsByTagName("TD")[position].getAttribute("data-type") == 'number'){
    	 sortdataType = 'number';
     }     
     if( prevIndex != position){
         sortState = 'N';
     }     
     if( prevIndex == position && sortState == 'Y'){
	     if(sortdataType == 'string'){
	    	 if (x.innerHTML.toLowerCase() < y.innerHTML.toLowerCase()) {     
		         shouldSwitch= true;
		         break;
		       }  	    
	     }else{
	    	 if (parseInt(x.innerHTML) < parseInt(y.innerHTML)) {     
		         shouldSwitch= true;
		         break;
		       } 
	    }
     }else{      
    	  if(sortdataType == 'string'){
	    	 if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {     
		       shouldSwitch= true;
		       break;
		     }
    	  }else{
    		  if (parseInt(x.innerHTML) > parseInt(y.innerHTML)) {     
   		       shouldSwitch= true;
   		       break;
   		     }
    	  } 
     }
   }
   
   if (shouldSwitch) {     
     rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
     switching = true;
   }   
 }
 sortState = sortState == 'Y' ? 'N' : 'Y'; 
 prevIndex = position;

}
	
</script>

</body>

</html>